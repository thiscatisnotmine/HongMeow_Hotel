<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Booking Confirmed - Hong Meow Hotel</title>
  <link rel="stylesheet" href="../HTML_Components/side-bar.css" />
  <link rel="stylesheet" href="../HTML_Components/top-bar.css" />
  <link rel="stylesheet" href="css/Booking_Comfirmed.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <my-sidebar></my-sidebar>
  <my-topbar></my-topbar>

  <!-- ครอบด้วย main-content -->
  <div class="main-content">

    <div class="summary-title">
      <div class="title-left">
        <h2 class="summary-heading">Booking is confirmed</h2>
        <img src="/asset/lets-icons_check-fill.svg" class="check-icon" alt="Confirmed" />
      </div>
      <div class="room-code">Booking No.: <span class="room-number" id="booking-number">DAD0000</span></div>
    </div>

    <div class="booking-summary">
      <div class="summary-block">
        <h3>Customer</h3>
        <div id="summary-customer"></div>
      </div>

      <div class="summary-block">
        <h3>Emergency Contact</h3>
        <div id="summary-urgent"></div>
      </div>

      <div class="summary-block">
        <h3>Room</h3>
        <div id="summary-room"></div>
      </div>

      <div class="summary-block">
        <h3>Pet</h3>
        <div id="summary-pet"></div>
      </div>
    </div>
    
    <div class="confirm-wrapper">
      <button class="wait-btn" onclick="window.location.href='********'">Wait for Payment</button>
      <button class="confirm-btn" onclick="window.location.href='********'">Payment</button>
    </div>

  </div> <!-- ปิด main-content -->

  <!-- Scripts -->
  <script src="../HTML_Components/side-bar.js"></script>
  <script src="../HTML_Components/top-bar.js"></script>
  <script src="javascript/btn.js"></script>
  <script src="javascript/confirm-submit.js"></script>

  <!-- ดึงข้อมูล -->
  <script>
    function fillConfirmedData(id, key) {
      const container = document.getElementById(id);
      if (!container) return;

      const allData = JSON.parse(localStorage.getItem("booking_confirmed_data") || "{}");
      const data = allData[key];
      if (!data) return;

      let html = "";

      if (Array.isArray(data)) {
        data.forEach((entry, index) => {
          html += `<div class="summary-entry"><strong>${key.replace("booking_", "").replace("_data", "")} ${index + 1}</strong><br/>`;
          for (const [k, v] of Object.entries(entry)) {
            html += `<div><strong>${k}:</strong> ${v}</div>`;
          }
          html += `</div>`;
        });
      } else {
        html += `<div class="summary-entry">`;
        for (const [k, v] of Object.entries(data)) {
          html += `<div><strong>${k}:</strong> ${v}</div>`;
        }
        html += `</div>`;
      }

      container.innerHTML = html;
    }

    document.addEventListener("DOMContentLoaded", function () {
      fillConfirmedData("summary-customer", "booking_customer_data");
      fillConfirmedData("summary-urgent", "booking_urgent_data");
      fillConfirmedData("summary-room", "booking_room_data");
      fillConfirmedData("summary-pet", "booking_pet_data");

      // ลบข้อมูลต้นทาง
      localStorage.removeItem("booking_customer_data");
      localStorage.removeItem("booking_urgent_data");
      localStorage.removeItem("booking_room_data");
      localStorage.removeItem("booking_pet_data");
    });
  </script>
</body>
</html>